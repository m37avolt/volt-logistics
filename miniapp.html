<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Volt Logistics Mobile App</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #141414;
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }

        .container {
            max-width: 375px;
            margin: 0 auto;
            padding: 16px;
            padding-bottom: 100px;
        }

        /* SPA Navigation */
        .page {
            display: none;
        }

        .page.active {
            display: block;
        }

        /* –ö–Ω–æ–ø–∫–∞ –∞–∫—Ü–∏–π —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è */
        .promotions-image-button {
            width: 100%;
            height: 160px;
            border: none;
            background: transparent;
            padding: 0;
            margin: 0 0 12px 0;
            cursor: pointer;
            transition: transform 0.15s ease;
            border-radius: 20px;
            overflow: hidden;
            display: block;
        }

        .promotions-image-button:active {
            transform: scale(0.98);
        }

        .promotions-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: 20px;
            filter: drop-shadow(2px 2px 6px rgba(0, 0, 0, 0.3));
            display: block;
        }

        /* –û—Å–Ω–æ–≤–Ω–∞—è —Å–µ—Ç–∫–∞ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ */
        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 12px;
        }

        .card {
            background-color: #2e2e2e;
            border-radius: 20px;
            padding: 24px;
            position: relative;
            overflow: hidden;
            transition: transform 0.15s ease;
            cursor: pointer;
            aspect-ratio: 1;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .card:active {
            transform: scale(0.98);
        }

        .card-gray {
            background-color: #626262;
        }

        /* –ì–ª–∞–≤–Ω—ã–π –ª–æ–≥–æ—Ç–∏–ø —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º */
        .logo-button {
            border: none;
            aspect-ratio: 1;
            cursor: pointer;
            transition: transform 0.15s ease;
            padding: 0;
            background: transparent;
            border-radius: 20px;
            overflow: hidden;
        }

        .logo-button:active {
            transform: scale(0.98);
        }

        /* –õ–æ–≥–æ—Ç–∏–ø —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–Ω—ã–º–∏ –∫—Ä–∞—è–º–∏ –∏ —Ç–µ–Ω—å—é */
        .company-logo {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 20px;
            filter: drop-shadow(2px 2px 6px rgba(0, 0, 0, 0.4));
        }

        /* –ò–∫–æ–Ω–∫–∏ –≤ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö —Å —Ç–µ–Ω—å—é */
        .card-icon {
            width: 80px;
            height: 80px;
            object-fit: contain;
            margin-bottom: 12px;
            filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.5));
        }

        .card-title {
            font-size: 18px;
            font-weight: 500;
            line-height: 1.1;
            color: white;
        }

        /* –ù–∏–∂–Ω—è—è —Å–µ–∫—Ü–∏—è */
        .bottom-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }

        .reviews-card {
            background-color: #2e2e2e;
            border-radius: 20px;
            padding: 20px;
            min-height: 160px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            cursor: pointer;
            transition: transform 0.15s ease;
        }

        .reviews-card:active {
            transform: scale(0.98);
        }

        /* –í–∏–¥–∂–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π - –µ–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å */
        .apps-widget {
            background-color: #2e2e2e;
            border-radius: 20px;
            padding: 16px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            min-height: 160px;
        }

        /* –°–µ—Ç–∫–∞ 2x2 –¥–ª—è –≤—Å–µ—Ö 4 –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π */
        .apps-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            gap: 8px;
            width: 100%;
            height: 100%;
        }

        .small-app {
            border-radius: 16px;
            overflow: hidden;
            cursor: pointer;
            transition: transform 0.15s ease;
            position: relative;
        }

        .small-app:active {
            transform: scale(0.95);
        }

        .small-app img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: drop-shadow(1px 1px 3px rgba(0, 0, 0, 0.6));
        }

        /* –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–∞–∫—Ä—É–≥–ª–µ–Ω–∏—è –¥–ª—è POIZON, Taobao –∏ Yellow - 13 –≥—Ä–∞–¥—É—Å–æ–≤ */
        .small-app.poizon-app img,
        .small-app.taobao-app img,
        .small-app.yellow-app img {
            border-radius: 13px;
        }

        /* –ß–µ—Ä–Ω—ã–π —Ñ–æ–Ω –¥–ª—è help –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è */
        .small-app.help-app {
            background-color: #000000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .small-app.help-app img {
            width: 80%;
            height: 80%;
            object-fit: contain;
        }

        /* –¢–µ–∫—Å—Ç –≤–Ω–∏–∑—É */
        .bottom-text {
            text-align: center;
            color: #737373;
            font-size: 14px;
            margin-bottom: 20px;
        }

        /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ–Ω—é - –±–æ–ª–µ–µ —É–∑–∫–æ–µ –∏ –¥–ª–∏–Ω–Ω–æ–µ, —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π */
        .fixed-nav {
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            width: 320px;
            height: 60px;
            background-color: rgba(46, 46, 46, 0.95);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-around;
            padding: 8px 16px;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .fixed-nav.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        /* –ö–Ω–æ–ø–∫–∏ –º–µ–Ω—é - –º–µ–Ω—å—à–µ */
        .nav-button {
            width: 44px;
            height: 44px;
            background-color: #000000;
            border: none;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.15s ease;
            position: relative;
        }

        .nav-button:active {
            transform: scale(0.95);
        }

        .nav-button.active {
            background-color: #008BA2;
        }

        /* –†–∞–∑–º–µ—Ä—ã –∏–∫–æ–Ω–æ–∫ –≤ –º–µ–Ω—é —Å —Ç–µ–Ω—å—é */
        .nav-button-profile img {
            width: 32px;
            height: 32px;
            object-fit: contain;
            filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.5));
        }

        .nav-button-chat img {
            width: 48px;
            height: 48px;
            object-fit: contain;
            filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.5));
        }

        .nav-button-lock img {
            width: 34px;
            height: 34px;
            object-fit: contain;
            filter: drop-shadow(1px 1px 2px rgba(0, 0, 0, 0.5));
        }

        /* –°—Ç–∏–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ */
        .stylish-back-button {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background-color: rgba(0, 0, 0, 0.7);
            border: none;
            border-radius: 20px;
            padding: 12px 24px;
            color: white;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 1000;
            opacity: 0;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .stylish-back-button.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .stylish-back-button:hover {
            background-color: rgba(0, 0, 0, 0.8);
            transform: translateX(-50%) translateY(-2px);
        }

        .stylish-back-button:active {
            transform: translateX(-50%) translateY(0);
        }

        .back-arrow-icon {
            font-size: 18px;
            font-weight: bold;
        }

        /* –°—Ç—Ä–∞–Ω–∏—Ü—ã SPA */
        .page-header {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 24px;
            padding: 16px 0;
        }

        .page-title {
            font-size: 24px;
            font-weight: 600;
        }

        .page-content {
            padding: 20px 0;
        }

        .placeholder-content {
            background-color: #2e2e2e;
            border-radius: 20px;
            padding: 40px 20px;
            text-align: center;
            color: #737373;
        }

        /* Fallback styles */
        .image-fallback {
            display: none;
            align-items: center;
            justify-content: center;
            background-color: #008BA2;
            border-radius: 20px;
            color: white;
            font-weight: bold;
        }

        .loading {
            opacity: 0.7;
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.7; }
            50% { opacity: 0.3; }
            100% { opacity: 0.7; }
        }

        /* –ù–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –¢–û–ß–ù–û–ì–û –ö–û–ü–ò–†–û–í–ê–ù–ò–Ø FIGMA –î–ò–ó–ê–ô–ù–ê */
        .figma-order-page {
            padding: 20px;
            max-width: 375px;
            margin: 0 auto;
            background-color: #141414;
        }

        /* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–∫–æ–Ω–∫–æ–π –∫–æ—Ä–∑–∏–Ω—ã */
        .figma-header {
          background: transparent;
          border-radius: 20px;
          padding: 0;
          margin-bottom: 24px;
          overflow: hidden;
        }

        .figma-header img {
          width: 100%;
          height: auto;
          object-fit: contain;
          filter: drop-shadow(2px 2px 6px rgba(0, 0, 0, 0.3));
        }

        /* –õ–µ–π–±–ª—ã –ø–æ–ª–µ–π */
        .figma-label {
            color: white;
            font-size: 16px;
            font-weight: 400;
            margin-bottom: 12px;
            display: block;
        }

        /* –°–µ–ª–µ–∫—Ç—ã –∏ –∏–Ω–ø—É—Ç—ã –≤ —Å—Ç–∏–ª–µ Figma */
        .figma-select,
        .figma-input,
        .figma-textarea {
            background-color: #00BCD4;
            border: none;
            border-radius: 11px;
            padding: 16px 20px;
            color: white;
            font-size: 16px;
            font-weight: 500;
            width: 100%;
            box-sizing: border-box;
            margin-bottom: 24px;
        }

        .figma-select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%23fff' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='m6 8 4 4 4-4'/%3e%3c/svg%3e");
            background-position: right 16px center;
            background-repeat: no-repeat;
            background-size: 16px;
            padding-right: 50px;
        }

        .figma-select option {
            background-color: #00BCD4;
            color: white;
        }

        .figma-select option:disabled {
            background-color: #666;
            color: #999;
        }

        .figma-textarea {
            resize: none;
            min-height: 60px;
        }

        .figma-select:focus,
        .figma-input:focus,
        .figma-textarea:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(0, 188, 212, 0.5);
        }

        .figma-select::placeholder,
        .figma-input::placeholder,
        .figma-textarea::placeholder {
            color: rgba(255, 255, 255, 0.8);
        }

        /* –°–µ–∫—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ —Å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–º —Å–∫—Ä–æ–ª–ª–æ–º */
        .figma-products-section {
            margin-bottom: 24px;
        }

        .figma-product-tabs {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 24px;
            overflow-x: auto;
            overflow-y: visible;
            padding: 4px 0;
            scrollbar-width: none;
            -ms-overflow-style: none;
            scroll-behavior: smooth;
        }

        .figma-product-tabs::-webkit-scrollbar {
            display: none;
        }

        /* –î–æ–±–∞–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∫—Ä–æ–ª–ª–∞ */
        .figma-product-tabs::after {
            content: '';
            position: absolute;
            right: 0;
            top: 0;
            bottom: 0;
            width: 20px;
            background: linear-gradient(to right, transparent, #141414);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .figma-product-tabs.scrollable::after {
            opacity: 1;
        }

        .figma-product-tab {
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.15s ease;
            padding: 0;
            opacity: 0.6;
            flex-shrink: 0;
        }

        .figma-product-tab img {
            height: 35px;
            width: auto;
            transition: transform 0.15s ease;
        }

        .figma-product-tab:hover img {
            transform: scale(1.05);
        }

        .figma-product-tab.active {
            opacity: 1;
        }

        .figma-add-product {
            background: none;
            border: none;
            cursor: pointer;
            transition: all 0.15s ease;
            padding: 0;
            opacity: 0.7;
            flex-shrink: 0;
        }

        .figma-add-product img {
            width: 35px;
            height: 35px;
            transition: transform 0.15s ease;
        }

        .figma-add-product:hover img {
            transform: scale(1.05);
        }

        .figma-add-product:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        /* –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ñ–æ—Ç–æ - –ü–†–ò–ñ–ê–¢–ê –ö –õ–ï–í–û–ú–£ –ö–†–ê–Æ */
        .figma-photo-button,
        .figma-delete-button-image, 
        .figma-submit-button-image {
          background: none;
          border: none;
          cursor: pointer;
          transition: transform 0.15s ease;
          padding: 0;
          margin: 24px 0;
          width: 100%;
          display: flex;
          justify-content: flex-start;
        }

        .figma-photo-button img {
          width: 60%;
          max-width: 180px;
          height: auto;
        }

        .figma-delete-button-image img,
        .figma-submit-button-image img {
          width: 100%;
          max-width: 300px;
          height: auto;
        }

        .figma-delete-button-image,
        .figma-submit-button-image {
          justify-content: center;
        }

        .figma-photo-button:hover,
        .figma-delete-button-image:hover,
        .figma-submit-button-image:hover {
          transform: scale(1.02);
        }

        .figma-photo-button:active,
        .figma-delete-button-image:active,
        .figma-submit-button-image:active {
          transform: scale(0.98);
        }

        .figma-submit-button-image:disabled {
          opacity: 0.5;
          cursor: not-allowed;
        }

        /* –ß–µ–∫–±–æ–∫—Å –¥–ª—è –≤—ã–±–æ—Ä–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ */
        .delivery-option {
            margin-bottom: 24px;
        }

        .delivery-option label {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            color: white;
            font-size: 16px;
        }

        .delivery-option input[type="checkbox"] {
            width: 20px;
            height: 20px;
            accent-color: #00BCD4;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –¥–ª—è –∫–Ω–æ–ø–∫–∏ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ main */
        .main-button-image {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .main-button-image:active {
            transform: scale(0.95);
            filter: brightness(1.1) drop-shadow(2px 2px 8px rgba(0, 0, 0, 0.3));
        }

        .main-button-image.clicked {
            animation: subscribeClick 0.6s ease-out;
        }

        @keyframes subscribeClick {
            0% {
                transform: scale(1);
            }
            25% {
                transform: scale(0.95) rotate(-2deg);
            }
            50% {
                transform: scale(1.05) rotate(1deg);
            }
            75% {
                transform: scale(0.98) rotate(-0.5deg);
            }
            100% {
                transform: scale(1) rotate(0deg);
            }
        }

        /* –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
        }

        .modal.show {
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: #2e2e2e;
            border-radius: 20px;
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                transform: translateY(-50px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #444;
        }

        .modal-header h3 {
            color: white;
            margin: 0;
            font-size: 18px;
        }

        .modal-close {
            background: none;
            border: none;
            color: #999;
            font-size: 24px;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-close:hover {
            color: white;
        }

        .modal-body {
            padding: 20px;
            color: white;
        }

        .modal-footer {
            display: flex;
            gap: 10px;
            padding: 20px;
            border-top: 1px solid #444;
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.15s ease;
        }

        .cancel-btn {
            background-color: #666;
            color: white;
        }

        .cancel-btn:hover {
            background-color: #555;
        }

        .submit-btn {
            background-color: #00BCD4;
            color: white;
        }

        .submit-btn:hover {
            background-color: #00ACC1;
        }

        .preview-item {
            background-color: #1a1a1a;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
        }

        .preview-item h4 {
            color: #00BCD4;
            margin: 0 0 10px 0;
            font-size: 16px;
        }

        .preview-field {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .preview-field-label {
            color: #999;
        }

        .preview-field-value {
            color: white;
            font-weight: 500;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã main —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º */
        .main-image-container {
            position: relative;
            width: 100%;
            height: calc(100vh - 32px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 16px;
        }

        .main-background-image {
            width: 100%;
            max-width: 300px;
            height: auto;
            object-fit: contain;
            filter: drop-shadow(2px 2px 8px rgba(0, 0, 0, 0.3));
        }

        /* –ù–µ–≤–∏–¥–∏–º–∞—è –∫–Ω–æ–ø–∫–∞ –ø–æ–≤–µ—Ä—Ö –æ–±–ª–∞—Å—Ç–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏ */
        .invisible-subscribe-button {
            position: absolute;
            bottom: 25%;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 40px;
            background: transparent;
            border: none;
            cursor: pointer;
            z-index: 10;
            transition: all 0.15s ease;
        }

        .invisible-subscribe-button:active {
            transform: translateX(-50%) scale(0.98);
        }

        /* Fallback —Å—Ç–∏–ª–∏ –¥–ª—è —Å–ª—É—á–∞—è, –µ—Å–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≥—Ä—É–∑–∏—Ç—Å—è */
        .main-fallback {
            width: 100%;
            max-width: 300px;
            height: 400px;
            background-color: #2e2e2e;
            border-radius: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã main —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ */
        .main-page-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: calc(100vh - 32px);
            padding: 20px;
            gap: 30px;
        }

        /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–ª–æ—Å–∫–∞ —Å Telegram –≤–≤–µ—Ä—Ö—É —ç–∫—Ä–∞–Ω–∞ */
        .telegram-fixed-bar {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 100;
            display: flex;
            justify-content: center;
            padding: 8px 16px;
            background: transparent;
        }

        .telegram-bar-content {
            max-width: 320px;
            width: 100%;
        }

        .main-tg-image-fixed {
            width: 100%;
            height: auto;
            object-fit: contain;
            filter: drop-shadow(2px 2px 6px rgba(0, 0, 0, 0.3));
        }

        .main-center-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
            position: relative;
        }

        .main-content-block {
            position: relative;
        }

        .main-block-image {
            width: 100%;
            max-width: 280px;
            height: auto;
            object-fit: contain;
            filter: drop-shadow(2px 2px 8px rgba(0, 0, 0, 0.3));
        }

        /* Fallback —Å—Ç–∏–ª–∏ */
        .main-tg-fallback,
        .main-block-fallback,
        .main-button-fallback {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–æ—Ñ–∏–ª—è */
        .profile-page-container {
            padding: 20px;
            min-height: calc(100vh - 32px);
        }

        .profile-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            max-width: 400px;
            margin: 0 auto;
        }

        .profile-card {
            background-color: #2e2e2e;
            border-radius: 20px;
            aspect-ratio: 1;
            cursor: pointer;
            transition: transform 0.15s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .profile-card:active {
            transform: scale(0.98);
        }

        .profile-card-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            text-align: center;
            padding: 20px;
        }

        .profile-avatar-container {
            position: relative;
            width: 60px;
            height: 60px;
        }

        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            object-fit: cover;
            border: 2px solid #00BCD4;
        }

        .profile-avatar-fallback {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #00BCD4;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: white;
        }

        .profile-card-text {
            color: white;
        }

        .profile-card-title {
            font-size: 16px;
            font-weight: 500;
            line-height: 1.1;
            text-transform: uppercase;
        }

        .profile-card-image {
            width: 100%;
            height: auto;
            aspect-ratio: 1;
            object-fit: cover;
            border-radius: 20px;
            cursor: pointer;
            transition: transform 0.15s ease;
            filter: drop-shadow(2px 2px 6px rgba(0, 0, 0, 0.3));
        }

        .profile-card-image:active {
            transform: scale(0.98);
        }

        .manager-panel {
            display: none;
        }

        .manager-panel.show {
            display: block;
        }

        /* –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–æ—Ç–æ */
        .photo-preview-container {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin: 16px 0;
        }

        .photo-preview-item {
            position: relative;
            width: 80px;
            height: 80px;
            border-radius: 8px;
            overflow: hidden;
            background-color: #2e2e2e;
        }

        .photo-preview-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .photo-delete-btn {
            position: absolute;
            top: 4px;
            right: 4px;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background-color: rgba(255, 68, 68, 0.9);
            border: 1px solid white;
            color: white;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.15s ease;
            /* –£–±—Ä–∞–Ω –±–ª—é—Ä —ç—Ñ—Ñ–µ–∫—Ç */
        }

        .photo-delete-btn:hover {
            background-color: rgba(204, 0, 0, 0.9);
            transform: scale(1.1);
        }
    

        /* –°—Ç–∏–ª–∏ –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ */
        .validation-error {
            background-color: rgba(255, 68, 68, 0.1);
            border: 1px solid #ff4444;
            color: #ff6666;
            padding: 12px 16px;
            border-radius: 8px;
            margin-bottom: 16px;
            font-size: 14px;
            display: none;
        }

        .validation-error.show {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .field-error {
            border-color: #ff4444 !important;
            box-shadow: 0 0 0 2px rgba(255, 68, 68, 0.2) !important;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è —Ñ–æ—Ç–æ –≤ –º–æ–¥–∞–ª—å–Ω–æ–º –æ–∫–Ω–µ */
        .modal-photos {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .modal-photo {
            width: 40px;
            height: 40px;
            border-radius: 4px;
            object-fit: cover;
            border: 1px solid #444;
        }
    </style>
    <script src="script_clean.js"></script>
</head>
<body>
    <div class="container">
        <!-- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ -->
        <div id="home" class="page active">
            <!-- –ö–Ω–æ–ø–∫–∞ –∞–∫—Ü–∏–π —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º -->
            <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/v1.png" 
                 alt="–ê–∫—Ü–∏–∏" 
                 class="promotions-image-button loading"
                 onclick="navigateTo('promotions')"
                 onerror="handleImageError(this, '–ê–ö–¶–ò–ò')"
                 onload="handleImageLoad(this)"
                 style="cursor: pointer;">
            <div class="image-fallback" style="width: 100%; height: 160px; margin-bottom: 12px; font-size: 18px; display: none;">–ê–ö–¶–ò–ò</div>

            <!-- –ü–µ—Ä–≤—ã–π —Ä—è–¥ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ -->
            <div class="grid">
                <!-- –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑ -->
                <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/v2.png" 
                     alt="–û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑" 
                     class="card loading"
                     onclick="navigateTo('order')"
                     onerror="handleImageError(this, '–ó–ê–ö–ê–ó')"
                     onload="handleImageLoad(this)"
                     style="cursor: pointer; padding: 0; object-fit: cover;">

                <!-- –õ–æ–≥–æ—Ç–∏–ø Volt Logistics —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º -->
                <button class="logo-button" onclick="navigateTo('main')" aria-label="Volt Logistics - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é">
                    <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/v1_14.png" 
                         alt="Volt Logistics Logo" 
                         class="company-logo loading"
                         onerror="handleImageError(this, 'V')"
                         onload="handleImageLoad(this)">
                    <div class="image-fallback" style="width: 100%; height: 100%; font-size: 36px; aspect-ratio: 1;">V</div>
                </button>
            </div>

            <!-- –í—Ç–æ—Ä–æ–π —Ä—è–¥ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö –∫–∞—Ä—Ç–æ—á–µ–∫ -->
            <div class="grid">
                <!-- –ê–∫—Ç—É–∞–ª—å–Ω—ã–π –∫—É—Ä—Å -->
                <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/v3.png" 
                     alt="–ê–∫—Ç—É–∞–ª—å–Ω—ã–π –∫—É—Ä—Å" 
                     class="card loading"
                     onclick="navigateTo('currency')"
                     onerror="handleImageError(this, '–ö–£–†–°')"
                     onload="handleImageLoad(this)"
                     style="cursor: pointer; padding: 0; object-fit: cover;">

                <!-- –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∑–∞–∫–∞–∑ -->
                <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/v4.png" 
                     alt="–†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∑–∞–∫–∞–∑" 
                     class="card loading"
                     onclick="navigateTo('calculator')"
                     onerror="handleImageError(this, '–†–ê–°–ß–ï–¢')"
                     onload="handleImageLoad(this)"
                     style="cursor: pointer; padding: 0; object-fit: cover;">
            </div>

            <!-- –ù–∏–∂–Ω—è—è —Å–µ–∫—Ü–∏—è -->
            <div class="bottom-section">
                <!-- –ù–∞—à–∏ –æ—Ç–∑—ã–≤—ã -->
                <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/v5.png" 
                     alt="–ù–∞—à–∏ –æ—Ç–∑—ã–≤—ã" 
                     class="reviews-card loading"
                     onclick="navigateTo('reviews')"
                     onerror="handleImageError(this, '–û–¢–ó–´–í–´')"
                     onload="handleImageLoad(this)"
                     style="cursor: pointer; padding: 0; object-fit: cover;">
                
                <!-- –í–∏–¥–∂–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –≤ –µ–¥–∏–Ω–æ–º —Å—Ç–∏–ª–µ -->
                <div class="apps-widget">
                    <div class="apps-grid">
                        <!-- Help –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å —á–µ—Ä–Ω—ã–º —Ñ–æ–Ω–æ–º -->
                        <div class="small-app help-app" onclick="navigateTo('help')">
                            <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/v55_13.png" alt="Help App">
                        </div>
                        <!-- Taobao –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º 13px -->
                        <div class="small-app taobao-app" onclick="navigateTo('taobao')">
                            <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/v1_9.png" alt="Taobao App">
                        </div>
                        <!-- Yellow –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º 13px -->
                        <div class="small-app yellow-app" onclick="navigateTo('yellow')">
                            <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/v1_11.png" alt="Yellow App">
                        </div>
                        <!-- POIZON –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∑–∞–∫—Ä—É–≥–ª–µ–Ω–∏–µ–º 13px -->
                        <div class="small-app poizon-app" onclick="navigateTo('poizon')">
                            <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/v1_8.png" alt="POIZON App">
                        </div>
                    </div>
                </div>
            </div>

            <!-- –¢–µ–∫—Å—Ç –≤–Ω–∏–∑—É -->
            <div class="bottom-text">–∞–≥–µ–Ω—Ç—Å–∫–∏–π –¥–æ–≥–æ–≤–æ—Ä</div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ main —Å –æ—Ç–¥–µ–ª—å–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ -->
        <div id="main" class="page">
            <!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ–ª–æ—Å–∫–∞ —Å Telegram –≤–≤–µ—Ä—Ö—É —ç–∫—Ä–∞–Ω–∞ -->
            <div class="telegram-fixed-bar">
                <div class="telegram-bar-content">
                    <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/main_tg.png" 
                         alt="Volt Logistics Telegram" 
                         class="main-tg-image-fixed"
                         onerror="handleImageError(this, 'Telegram')"
                         onload="handleImageLoad(this)">
                    <div class="image-fallback main-tg-fallback" style="display: none;">
                        <div style="display: flex; align-items: center; gap: 12px; padding: 16px; background-color: #2e2e2e; border-radius: 20px;">
                            <div style="width: 40px; height: 40px; background-color: #00BCD4; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-size: 20px;">‚úà</div>
                            <div>
                                <div style="color: white; font-weight: 600;">Volt Logistics</div>
                                <div style="color: #737373; font-size: 13px;">–Ω–∞—à —Ç–µ–ª–µ–≥—Ä–∞–º –∫–∞–Ω–∞–ª</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="main-page-container" style="padding-top: 80px;">
                <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Å–µ–∫—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –±–ª–æ–∫–æ–º –∏ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–Ω–æ–ø–∫–æ–π -->
                <div class="main-center-section">
                    <div class="main-content-block" style="position: relative;">
                        <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/main.png" 
                             alt="Volt Logistics Main Block" 
                             class="main-block-image"
                             onerror="handleImageError(this, 'Main Block')"
                             onload="handleImageLoad(this)">
                        
                        <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–≤–µ—Ä—Ö –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –±–ª–æ–∫–∞ -->
                        <div style="position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);">
                            <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/main_button.png" 
                                 alt="–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è" 
                                 class="main-button-image"
                                 onclick="openTelegramChannel()"
                                 onerror="handleImageError(this, 'Button')"
                                 onload="handleImageLoad(this)"
                                 style="cursor: pointer; width: 250px; height: auto;">
                            <div class="image-fallback main-button-fallback" style="display: none;">
                                <button style="background-color: #00BCD4; color: #000000; border: none; border-radius: 20px; padding: 12px 40px; font-size: 14px; font-weight: 600; cursor: pointer; text-transform: uppercase; min-width: 200px;" onclick="openTelegramChannel()">–ü–û–î–ü–ò–°–ê–¢–¨–°–Ø</button>
                            </div>
                        </div>

                        <div class="image-fallback main-block-fallback" style="display: none;">
                            <div style="background-color: #2e2e2e; border-radius: 25px; padding: 40px 20px; text-align: center; position: relative;">
                                <div style="width: 80px; height: 80px; background-color: #000; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; color: #00BCD4; font-size: 36px; font-weight: bold;">V</div>
                                <div style="color: white; font-size: 18px; font-weight: 600; letter-spacing: 1px; margin-bottom: 20px;">VOLT LOGISTICS</div>
                                <button style="background-color: #00BCD4; color: #000000; border: none; border-radius: 20px; padding: 12px 40px; font-size: 14px; font-weight: 600; cursor: pointer; text-transform: uppercase; min-width: 200px;" onclick="openTelegramChannel()">–ü–û–î–ü–ò–°–ê–¢–¨–°–Ø</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div id="profile" class="page">
            <div class="profile-page-container">
                <!-- –°–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –ø—Ä–æ—Ñ–∏–ª—è -->
                <div class="profile-grid">
                    <!-- –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å -->
                    <div class="profile-card" onclick="navigateTo('my-profile')">
                        <div class="profile-card-content">
                            <div class="profile-avatar-container">
                                <img id="userAvatar" src="/placeholder.svg" alt="User Avatar" class="profile-avatar" style="display: none;">
                                <div class="profile-avatar-fallback">üë§</div>
                            </div>
                            <div class="profile-card-text">
                                <div class="profile-card-title">–ú–û–ô</div>
                                <div class="profile-card-title">–ü–†–û–§–ò–õ–¨</div>
                            </div>
                        </div>
                    </div>

                    <!-- –ú–æ–∏ –∑–∞–∫–∞–∑—ã -->
                    <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/profile_orders.png" 
                         alt="–ú–æ–∏ –∑–∞–∫–∞–∑—ã" 
                         class="profile-card-image"
                         onclick="navigateTo('my-orders')"
                         onerror="handleImageError(this, '–ó–ê–ö–ê–ó–´')"
                         onload="handleImageLoad(this)">

                    <!-- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ -->
                    <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/profile_referal.png" 
                         alt="–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞" 
                         class="profile-card-image"
                         onclick="navigateTo('referral')"
                         onerror="handleImageError(this, '–†–ï–§–ï–†–ê–õ')"
                         onload="handleImageLoad(this)">

                    <!-- –ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π) -->
                    <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/profile_mgmt.png" 
                         alt="–ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞" 
                         class="profile-card-image manager-panel"
                         onclick="navigateTo('manager-panel')"
                         onerror="handleImageError(this, '–ú–ï–ù–ï–î–ñ–ï–†')"
                         onload="handleImageLoad(this)"
                         style="display: none;">
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ —á–∞—Ç–∞ -->
        <div id="chat" class="page">
            <div class="page-header">
                <div class="page-title">–ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>–ß–∞—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π</h3>
                    <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞</p>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ -->
        <div id="security" class="page">
            <div class="page-header">
                <div class="page-title">–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h3>
                    <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</p>
                </div>
            </div>
        </div>

        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –¥–ª—è –∫–∞—Ä—Ç–æ—á–µ–∫ -->
        <div id="promotions" class="page">
            <div class="page-header">
                <div class="page-title">–ê–∫—Ü–∏–∏</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>–¢–µ–∫—É—â–∏–µ –∞–∫—Ü–∏–∏</h3>
                    <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∞–∫—Ü–∏–∏ –∏ —Å–∫–∏–¥–∫–∏</p>
                </div>
            </div>
        </div>

        <!-- –°–¢–†–ê–ù–ò–¶–ê –ó–ê–ö–ê–ó–ê –í –¢–û–ß–ù–û–ú –°–û–û–¢–í–ï–¢–°–¢–í–ò–ò –° FIGMA –î–ò–ó–ê–ô–ù–û–ú -->
        <div id="order" class="page">
            <div class="figma-order-page">
                <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏–∑ GitHub -->
                <div class="figma-header">
                    <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/order_table.png" 
                         alt="Volt Logistics - –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑" 
                         style="width: 100%; height: auto; object-fit: contain;"
                         onerror="handleImageError(this, '–û–§–û–†–ú–ò–¢–¨ –ó–ê–ö–ê–ó')"
                         onload="handleImageLoad(this)">
                    <div class="image-fallback" style="display: none;">
                        <div style="display: flex; align-items: center; gap: 12px; padding: 16px; background-color: #4A4A4A; border-radius: 20px; color: white;">
                            <div style="width: 24px; height: 24px; background-color: #00BCD4; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 14px;">üõí</div>
                            <div>
                                <div style="font-size: 18px; font-weight: 600;">Volt Logistics</div>
                                <div style="font-size: 14px; opacity: 0.8;">–æ—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- –§–æ—Ä–º–∞ –∑–∞–∫–∞–∑–∞ -->
                <form id="figmaOrderForm">
                    <!-- –í—ã–±–æ—Ä —Å—Ç—Ä–∞–Ω—ã –≤—ã–∫—É–ø–∞ -->
                    <label class="figma-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É –≤—ã–∫—É–ø–∞</label>
                    <select id="figmaCountry" class="figma-select" onchange="handleFigmaCountryChange(this.value)">
                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>
                        <option value="china">–ö–∏—Ç–∞–π</option>
                        <option value="japan">–Ø–ø–æ–Ω–∏—è</option>
                    </select>

                    <!-- –°–µ–∫—Ü–∏—è —Ç–æ–≤–∞—Ä–æ–≤ -->
                    <div id="figmaProductsSection" style="display: none;">
                        <label class="figma-label">–î–æ–±–∞–≤—å—Ç–µ —Ç–æ–≤–∞—Ä[—ã]</label>
                        <div class="figma-product-tabs">
                            <button type="button" class="figma-product-tab active" onclick="selectFigmaProduct(1)">
                                <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/order_item1.png" alt="–¢–æ–≤–∞—Ä 1">
                            </button>
                            <button type="button" class="figma-product-tab" onclick="selectFigmaProduct(2)" style="display: none;">
                                <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/order_item2.png" alt="–¢–æ–≤–∞—Ä 2">
                            </button>
                            <button type="button" class="figma-product-tab" onclick="selectFigmaProduct(3)" style="display: none;">
                                <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/order_item3.png" alt="–¢–æ–≤–∞—Ä 3">
                            </button>
                            <button type="button" class="figma-add-product" onclick="addFigmaProduct()">
                                <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/order_add_item.png" alt="–î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä">
                            </button>
                        </div>

    <!-- –í—ã–±–æ—Ä –ø–ª–æ—â–∞–¥–∫–∏ (—Ç–æ–ª—å–∫–æ –¥–ª—è –ö–∏—Ç–∞—è) -->
    <div id="figmaMarketplaceSection">
        <label class="figma-label">–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–æ—â–∞–¥–∫—É</label>
        <select id="figmaMarketplace" class="figma-select">
            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –ø–ª–æ—â–∞–¥–∫—É</option>
            <option value="category1">–ö–∞—Ç–µ–≥–æ—Ä–∏—è 1 (POIZON, TaoBao, Weidan)</option>
            <option value="category2">–ö–∞—Ç–µ–≥–æ—Ä–∏—è 2 (WeChat, Yupoo, GooFish)</option>
        </select>
    </div>

    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏–∑ GitHub -->
    <label class="figma-label">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞</label>
    <button type="button" class="figma-photo-button" onclick="uploadFigmaPhoto()">
        <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/order_add_photo.png" 
             alt="–î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ">
    </button>
    <input type="file" id="figmaPhotoInput" accept="image/*" multiple style="display: none;" onchange="handleFigmaPhotoUpload(this)">
    
    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ -->
    <div id="photoPreviewContainer" class="photo-preview-container"></div>

    <!-- –ü–æ–ª—è —Ç–æ–≤–∞—Ä–∞ -->
    <label class="figma-label" id="figmaLinkLabel">–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É</label>
    <input type="url" id="figmaLink" class="figma-input" placeholder="">

    <label class="figma-label">–í–≤–µ–¥–∏—Ç–µ —Ü–µ–Ω—É</label>
    <input type="number" id="figmaPrice" class="figma-input" placeholder="" step="0.01" min="0">

    <label class="figma-label">–í–≤–µ–¥–∏—Ç–µ —Ü–≤–µ—Ç</label>
    <input type="text" id="figmaColor" class="figma-input" placeholder="">

    <label class="figma-label">–í–≤–µ–¥–∏—Ç–µ —Ä–∞–∑–º–µ—Ä</label>
    <input type="text" id="figmaSize" class="figma-input" placeholder="">

    <label class="figma-label">–í–≤–µ–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ</label>
    <input type="number" id="figmaQuantity" class="figma-input" placeholder="" min="1" max="99" value="1">

    <label class="figma-label">–í–≤–µ–¥–∏—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π</label>
    <textarea id="figmaComment" class="figma-textarea" placeholder=""></textarea>

    <!-- –ö–Ω–æ–ø–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏–∑ GitHub -->
    <button type="button" class="figma-delete-button-image" onclick="deleteFigmaProduct()">
        <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/order_button2.png" 
             alt="–£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä">
    </button>
</div>

<!-- –î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è -->
<div id="figmaRecipientSection" style="display: none;">
    <!-- –í—ã–±–æ—Ä —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ -->
    <label class="figma-label">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –¥–æ—Å—Ç–∞–≤–∫–∏</label>
    <select id="deliveryType" class="figma-select" onchange="handleDeliveryTypeChange(this.value)">
        <option value="same">–î–æ—Å—Ç–∞–≤–∏—Ç—å –≤—Å–µ —Ç–æ–≤–∞—Ä—ã –Ω–∞ –æ–¥–∏–Ω –∞–¥—Ä–µ—Å</option>
        <option value="different">–î–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä—ã –Ω–∞ —Ä–∞–∑–Ω—ã–µ –∞–¥—Ä–µ—Å–∞</option>
    </select>

    <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ -->
    <div id="validationError" class="validation-error"></div>

    <!-- –û–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è (–¥–ª—è –æ–¥–Ω–æ–≥–æ –∞–¥—Ä–µ—Å–∞) -->
    <div id="commonRecipientData">
        <label class="figma-label">–í–≤–µ–¥–∏—Ç–µ –í–∞—à–µ –§–ò–û</label>
        <input type="text" id="figmaRecipientName" class="figma-input" placeholder="">

        <label class="figma-label">–í–≤–µ–¥–∏—Ç–µ –í–∞—à —é–∑–µ—Ä–Ω–µ–π–º</label>
        <input type="text" id="figmaRecipientUsername" class="figma-input" placeholder="">

        <label class="figma-label">–í–≤–µ–¥–∏—Ç–µ –í–∞—à –ü–í–ó –°–î–≠–ö</label>
        <textarea id="figmaRecipientAddress" class="figma-textarea" placeholder=""></textarea>
    </div>

    <!-- –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ (–¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤) -->
    <div id="individualRecipientData" style="display: none;">
        <div id="recipientDataContainer"></div>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–∫–∞–∑–∞ —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º –∏–∑ GitHub -->
    <button type="button" class="figma-submit-button-image" onclick="submitFigmaOrder()">
        <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/order_button1.png" 
             alt="–°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑">
    </button>
</div>
</form>
            </div>
        </div>

        <!-- –û—Å—Ç–∞–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
        <div id="currency" class="page">
            <div class="page-header">
                <div class="page-title">–ê–∫—Ç—É–∞–ª—å–Ω—ã–π –∫—É—Ä—Å</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>–ö—É—Ä—Å—ã –≤–∞–ª—é—Ç</h3>
                    <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç</p>
                </div>
            </div>
        </div>

        <div id="calculator" class="page">
            <div class="page-header">
                <div class="page-title">–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∑–∞–∫–∞–∑–∞</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>–†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏</h3>
                    <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∑–∞–∫–∞–∑–∞</p>
                </div>
            </div>
        </div>

        <div id="reviews" class="page">
            <div class="page-header">
                <div class="page-title">–û—Ç–∑—ã–≤—ã</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>–û—Ç–∑—ã–≤—ã –∫–ª–∏–µ–Ω—Ç–æ–≤</h3>
                    <p>–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–∑—ã–≤—ã –æ –Ω–∞—à–∏—Ö —É—Å–ª—É–≥–∞—Ö</p>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å" -->
        <div id="my-profile" class="page">
            <div class="page-header">
                <div class="page-title">–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ—Ñ–∏–ª–µ</h3>
                    <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ</p>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ú–æ–∏ –∑–∞–∫–∞–∑—ã" -->
        <div id="my-orders" class="page">
            <div class="page-header">
                <div class="page-title">–ú–æ–∏ –∑–∞–∫–∞–∑—ã</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤</h3>
                    <p>–ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–ø–∏—Å–æ–∫ –≤–∞—à–∏—Ö –∑–∞–∫–∞–∑–æ–≤</p>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞" -->
        <div id="referral" class="page">
            <div class="page-header">
                <div class="page-title">–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>–ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–∑–µ–π</h3>
                    <p>–ü–æ–ª—É—á–∞–π—Ç–µ –±–æ–Ω—É—Å—ã –∑–∞ –ø—Ä–∏–≥–ª–∞—à–µ–Ω–Ω—ã—Ö –¥—Ä—É–∑–µ–π</p>
                </div>
            </div>
        </div>

        <!-- –°—Ç—Ä–∞–Ω–∏—Ü–∞ "–ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞" -->
        <div id="manager-panel" class="page">
            <div class="page-header">
                <div class="page-title">–ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º–æ–π</h3>
                    <p>–ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤</p>
                </div>
            </div>
        </div>

        <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π -->
        <div id="help" class="page">
            <div class="page-header">
                <div class="page-title">–ü–æ–º–æ—â—å</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>–¶–µ–Ω—Ç—Ä –ø–æ–º–æ—â–∏</h3>
                    <p>–ó–¥–µ—Å—å –≤—ã –Ω–∞–π–¥–µ—Ç–µ –æ—Ç–≤–µ—Ç—ã –Ω–∞ —á–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã</p>
                </div>
            </div>
        </div>

        <div id="taobao" class="page">
            <div class="page-header">
                <div class="page-title">Taobao</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>Taobao Marketplace</h3>
                    <p>–ü–æ–∫—É–ø–∫–∏ —Å –∫–∏—Ç–∞–π—Å–∫–æ–π –ø–ª–æ—â–∞–¥–∫–∏ Taobao</p>
                </div>
            </div>
        </div>

        <div id="yellow" class="page">
            <div class="page-header">
                <div class="page-title">Yellow App</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>Yellow Application</h3>
                    <p>–°–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –∑–∞–∫–∞–∑–æ–≤</p>
                </div>
            </div>
        </div>

        <div id="poizon" class="page">
            <div class="page-header">
                <div class="page-title">POIZON</div>
            </div>
            <div class="page-content">
                <div class="placeholder-content">
                    <h3>POIZON Marketplace</h3>
                    <p>–ü–æ–∫—É–ø–∫–∏ —Å –ø–ª–æ—â–∞–¥–∫–∏ POIZON</p>
                </div>
            </div>
        </div>
    </div>

    <!-- –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –º–µ–Ω—é -->
    <div class="fixed-nav" id="mainNav">
        <button class="nav-button nav-button-profile" onclick="navigateTo('profile')" aria-label="–ü—Ä–æ—Ñ–∏–ª—å">
            <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/v28_55.png" alt="Profile">
        </button>
        <button class="nav-button nav-button-chat" onclick="navigateTo('chat')" aria-label="–ß–∞—Ç">
            <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/v55_7.png" alt="Chat">
        </button>
        <button class="nav-button nav-button-lock" onclick="navigateTo('security')" aria-label="–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å">
            <img src="https://raw.githubusercontent.com/m37avolt/volt-logistics/main/img/v177_2.png" alt="Security">
        </button>
    </div>

    <!-- –ö–Ω–æ–ø–∫–∞ –Ω–∞–∑–∞–¥ -->
    <button class="stylish-back-button" id="backButton" onclick="goBack()">
        <span class="back-arrow-icon">‚Üê</span>
        <span>–Ω–∞–∑–∞–¥</span>
    </button>

    <!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ JavaScript –∏–∑ GitHub —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è -->
    <script>
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
let currentPage = "home"
let pageHistory = ["home"] // –ò—Å—Ç–æ—Ä–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü –¥–ª—è –∫–Ω–æ–ø–∫–∏ –Ω–∞–∑–∞–¥

// –£–ª—É—á—à–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–∫–∞–∑–∞ –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–π –≤–µ—Ä—Å–∏–∏
let figmaOrderState = {
  country: "",
  step: "country", // country, products, final
  currentProductId: 1, // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è —Ç–æ–≤–∞—Ä 1
  maxProducts: 3, // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ–≤–∞—Ä–æ–≤
  activeProducts: [1], // –ê–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã (–Ω–∞—á–∏–Ω–∞–µ–º —Å —Ç–æ–≤–∞—Ä–∞ 1)
  products: {
    1: {
      marketplace: "",
      link: "",
      price: "",
      color: "",
      size: "",
      quantity: 1,
      comment: "",
      photos: [],
      recipient: null,
    },
    2: {
      marketplace: "",
      link: "",
      price: "",
      color: "",
      size: "",
      quantity: 1,
      comment: "",
      photos: [],
      recipient: null,
    },
    3: {
      marketplace: "",
      link: "",
      price: "",
      color: "",
      size: "",
      quantity: 1,
      comment: "",
      photos: [],
      recipient: null,
    },
  },
  deliveryType: "same", // "same" –∏–ª–∏ "different"
  commonRecipient: {
    name: "",
    username: "",
    address: "",
  },
}

// –ù–∞–≤–∏–≥–∞—Ü–∏—è
function navigateTo(pageId) {
  // –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ –∏—Å—Ç–æ—Ä–∏—é, –µ—Å–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥–∏–º –Ω–∞ –Ω–æ–≤—É—é
  if (pageId !== currentPage) {
    pageHistory.push(pageId)
  }

  // –°–∫—Ä—ã—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
  document.querySelectorAll(".page").forEach((page) => {
    page.classList.remove("active")
  })

  // –ü–æ–∫–∞–∑–∞—Ç—å –Ω–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
  const newPage = document.getElementById(pageId)
  if (newPage) {
    newPage.classList.add("active")
    currentPage = pageId
  }

  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–æ–π –Ω–∞–∑–∞–¥ - –ù–ï –ü–û–ö–ê–ó–´–í–ê–¢–¨ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  const backButton = document.getElementById("backButton")
  if (pageHistory.length <= 1 || pageId === "home") {
    backButton.classList.remove("show")
  } else {
    setTimeout(() => {
      backButton.classList.add("show")
    }, 100)
  }

  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–º –º–µ–Ω—é
  const mainNav = document.getElementById("mainNav")
  if (pageId === "home") {
    setTimeout(() => {
      mainNav.classList.add("show")
    }, 200)
  } else {
    mainNav.classList.remove("show")
  }

  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–∫–∞–∑–∞
  if (pageId === "order") {
    initFigmaOrderPage()
  }
}

function goBack() {
  // –£–¥–∞–ª–∏—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏
  if (pageHistory.length > 1) {
    pageHistory.pop()
    const previousPage = pageHistory[pageHistory.length - 1]

    // –°–∫—Ä—ã—Ç—å —Ç–µ–∫—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    document.querySelectorAll(".page").forEach((page) => {
      page.classList.remove("active")
    })

    // –ü–æ–∫–∞–∑–∞—Ç—å –ø—Ä–µ–¥—ã–¥—É—â—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
    const prevPage = document.getElementById(previousPage)
    if (prevPage) {
      prevPage.classList.add("active")
      currentPage = previousPage
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–æ–π –Ω–∞–∑–∞–¥ - –ù–ï –ü–û–ö–ê–ó–´–í–ê–¢–¨ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
    const backButton = document.getElementById("backButton")
    if (pageHistory.length <= 1 || previousPage === "home") {
      backButton.classList.remove("show")
    }

    // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–º –º–µ–Ω—é
    const mainNav = document.getElementById("mainNav")
    if (previousPage === "home") {
      setTimeout(() => {
        mainNav.classList.add("show")
      }, 200)
    } else {
      mainNav.classList.remove("show")
    }
  }
}

// –£–ª—É—á—à–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–∫–∞–∑–∞
function initFigmaOrderPage() {
  console.log("Initializing improved Figma order page")
  resetFigmaOrderState()
  updateFigmaStepsVisibility()
  setupFigmaEventListeners()
}

function resetFigmaOrderState() {
  figmaOrderState = {
    country: "",
    step: "country",
    currentProductId: 1,
    maxProducts: 3,
    activeProducts: [1],
    products: {
      1: {
        marketplace: "",
        link: "",
        price: "",
        color: "",
        size: "",
        quantity: 1,
        comment: "",
        photos: [],
        recipient: null,
      },
      2: {
        marketplace: "",
        link: "",
        price: "",
        color: "",
        size: "",
        quantity: 1,
        comment: "",
        photos: [],
        recipient: null,
      },
      3: {
        marketplace: "",
        link: "",
        price: "",
        color: "",
        size: "",
        quantity: 1,
        comment: "",
        photos: [],
        recipient: null,
      },
    },
    deliveryType: "same",
    commonRecipient: {
      name: "",
      username: "",
      address: "",
    },
  }

  // –°–±—Ä–æ—Å–∏—Ç—å —Ñ–æ—Ä–º—É
  const form = document.getElementById("figmaOrderForm")
  if (form) {
    form.reset()
  }

  // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Å–µ–∫—Ü–∏–∏
  document.getElementById("figmaProductsSection").style.display = "none"
  document.getElementById("figmaRecipientSection").style.display = "none"
  document.getElementById("figmaMarketplaceSection").style.display = "none"

  // –û—á–∏—Å—Ç–∏—Ç—å –æ—à–∏–±–∫–∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
  clearValidationErrors()
}

function setupFigmaEventListeners() {
  // –ê–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞
  const productFields = [
    "figmaMarketplace",
    "figmaLink",
    "figmaPrice",
    "figmaColor",
    "figmaSize",
    "figmaQuantity",
    "figmaComment",
  ]

  productFields.forEach((fieldId) => {
    const field = document.getElementById(fieldId)
    if (field) {
      field.addEventListener("change", saveFigmaCurrentProductData)
      field.addEventListener("input", saveFigmaCurrentProductData)
    }
  })

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
  document.getElementById("figmaMarketplace")?.addEventListener("change", () => {
    updateFigmaFieldsVisibility()
    saveFigmaCurrentProductData()
  })

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤—ã–±–æ—Ä–∞ —Ç–∏–ø–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
  document.getElementById("deliveryType")?.addEventListener("change", (e) => {
    figmaOrderState.recipient.deliveryType = e.target.value
  })
}

// –£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–∞–Ω—ã
function handleFigmaCountryChange(country) {
  figmaOrderState.country = country

  if (country === "china") {
    figmaOrderState.step = "products"
    document.getElementById("figmaMarketplaceSection").style.display = "block"
    updateFigmaStepsVisibility()
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–≤–∞—Ä 1
    updateFigmaProductTabs()
  } else if (country === "japan") {
    figmaOrderState.step = "products"
    document.getElementById("figmaMarketplaceSection").style.display = "none"
    updateFigmaStepsVisibility()
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑–∞—Ç—å —Ç–æ–≤–∞—Ä 1
    updateFigmaProductTabs()
  } else {
    figmaOrderState.step = "country"
    updateFigmaStepsVisibility()
  }
}

// –£–ª—É—á—à–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —à–∞–≥–∞–º–∏
function updateFigmaStepsVisibility() {
  const productsSection = document.getElementById("figmaProductsSection")
  const recipientSection = document.getElementById("figmaRecipientSection")

  switch (figmaOrderState.step) {
    case "country":
      productsSection.style.display = "none"
      recipientSection.style.display = "none"
      break
    case "products":
      productsSection.style.display = "block"
      recipientSection.style.display = "none"
      break
    case "final":
      productsSection.style.display = "block"
      recipientSection.style.display = "block"
      break
  }

  updateFigmaSubmitButton()
}

// –í—ã–±–æ—Ä —Ç–æ–≤–∞—Ä–∞ (1, 2, 3)
function selectFigmaProduct(productId) {
  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ —Ç–æ–≤–∞—Ä–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º
  saveFigmaCurrentProductData()

  figmaOrderState.currentProductId = productId
  updateFigmaProductTabs()
  loadFigmaProductData()
}

// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–æ–≤–∞—Ä–∞ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫—É "+"
function addFigmaProduct() {
  // –ù–∞–π—Ç–∏ —Å–ª–µ–¥—É—é—â–∏–π –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–æ–≤–∞—Ä
  for (let i = 1; i <= figmaOrderState.maxProducts; i++) {
    if (!figmaOrderState.activeProducts.includes(i)) {
      figmaOrderState.activeProducts.push(i)
      figmaOrderState.currentProductId = i
      updateFigmaProductTabs()
      loadFigmaProductData()
      break
    }
  }
}

function updateFigmaProductTabs() {
  const tabs = document.querySelectorAll(".figma-product-tab")
  const addButton = document.querySelector(".figma-add-product")

  // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Ç–∞–±—ã —Å–Ω–∞—á–∞–ª–∞
  tabs.forEach((tab, index) => {
    tab.style.display = "none"
    tab.classList.remove("active")
  })

  // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–æ–ª—å–∫–æ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã
  figmaOrderState.activeProducts.forEach((productId, index) => {
    const tab = tabs[productId - 1]
    if (tab) {
      tab.style.display = "block"
      if (productId === figmaOrderState.currentProductId) {
        tab.classList.add("active")
      }
    }
  })

  // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–æ–π –¥–æ–±–∞–≤–ª–µ–Ω–∏—è
  if (figmaOrderState.activeProducts.length >= figmaOrderState.maxProducts) {
    addButton.style.display = "none"
  } else {
    addButton.style.display = "block"
  }

  // –û–±–Ω–æ–≤–∏—Ç—å –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä —Å–∫—Ä–æ–ª–ª–∞
  setTimeout(updateScrollIndicator, 100)
}

function loadFigmaProductData() {
  const product = figmaOrderState.products[figmaOrderState.currentProductId]
  if (!product) return

  // –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞ –≤ —Ñ–æ—Ä–º—É
  document.getElementById("figmaMarketplace").value = product.marketplace || ""
  document.getElementById("figmaLink").value = product.link || ""
  document.getElementById("figmaPrice").value = product.price || ""
  document.getElementById("figmaColor").value = product.color || ""
  document.getElementById("figmaSize").value = product.size || ""
  document.getElementById("figmaQuantity").value = product.quantity || 1
  document.getElementById("figmaComment").value = product.comment || ""

  // –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Ñ–æ—Ç–æ
  updatePhotoPreview()

  // –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª–µ–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞
  updateFigmaFieldsVisibility()
}

function saveFigmaCurrentProductData() {
  const product = figmaOrderState.products[figmaOrderState.currentProductId]
  if (!product) return

  product.marketplace = document.getElementById("figmaMarketplace").value
  product.link = document.getElementById("figmaLink").value
  product.price = document.getElementById("figmaPrice").value
  product.color = document.getElementById("figmaColor").value
  product.size = document.getElementById("figmaSize").value
  product.quantity = document.getElementById("figmaQuantity").value
  product.comment = document.getElementById("figmaComment").value

  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –º–æ–∂–Ω–æ –ª–∏ –ø–µ—Ä–µ–π—Ç–∏ –∫ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º—É —à–∞–≥—É
  if (validateFigmaProductsStep()) {
    figmaOrderState.step = "final"
    updateFigmaStepsVisibility()
  }
}

function updateFigmaFieldsVisibility() {
  const marketplace = document.getElementById("figmaMarketplace").value
  const linkField = document.getElementById("figmaLink")
  const linkLabel = document.getElementById("figmaLinkLabel")

  if (marketplace === "category2") {
    if (linkLabel) linkLabel.textContent = "–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞/—Å—Å—ã–ª–∫–∞ –Ω–∞ –∫–æ–Ω—Ç–∞–∫—Ç"
    linkField.placeholder = "–í–≤–µ–¥–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é"
  } else {
    if (linkLabel) linkLabel.textContent = "–í—Å—Ç–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É"
    linkField.placeholder = "–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ —Ç–æ–≤–∞—Ä"
  }
}

// –í–∞–ª–∏–¥–∞—Ü–∏—è
function validateFigmaProductsStep() {
  // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–π —Ç–æ–≤–∞—Ä –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö
  return figmaOrderState.activeProducts.some((productId) => {
    const product = figmaOrderState.products[productId]
    return product.link && product.price && product.quantity > 0
  })
}

function handleDeliveryTypeChange(deliveryType) {
  figmaOrderState.deliveryType = deliveryType

  const commonData = document.getElementById("commonRecipientData")
  const individualData = document.getElementById("individualRecipientData")

  if (deliveryType === "same") {
    commonData.style.display = "block"
    individualData.style.display = "none"
    // –û—á–∏—Å—Ç–∏—Ç—å –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    figmaOrderState.activeProducts.forEach((productId) => {
      figmaOrderState.products[productId].recipient = null
    })
  } else {
    commonData.style.display = "none"
    individualData.style.display = "block"
    generateIndividualRecipientForms()
  }

  clearValidationErrors()
}

function generateIndividualRecipientForms() {
  const container = document.getElementById("recipientDataContainer")
  container.innerHTML = ""

  figmaOrderState.activeProducts.forEach((productId) => {
    const product = figmaOrderState.products[productId]
    if (!product.recipient) {
      product.recipient = { name: "", username: "", address: "" }
    }

    const formHTML = `
      <div class="preview-item" style="margin-bottom: 24px;">
        <h4>–î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è –¥–ª—è —Ç–æ–≤–∞—Ä–∞ ${productId}</h4>
        
        <label class="figma-label">–§–ò–û –ø–æ–ª—É—á–∞—Ç–µ–ª—è</label>
        <input type="text" id="recipientName${productId}" class="figma-input" 
               value="${product.recipient.name}" 
               onchange="updateIndividualRecipient(${productId}, 'name', this.value)"
               placeholder="">

        <label class="figma-label">–Æ–∑–µ—Ä–Ω–µ–π–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è</label>
        <input type="text" id="recipientUsername${productId}" class="figma-input" 
               value="${product.recipient.username}"
               onchange="updateIndividualRecipient(${productId}, 'username', this.value)"
               placeholder="">

        <label class="figma-label">–ü–í–ó –°–î–≠–ö</label>
        <textarea id="recipientAddress${productId}" class="figma-textarea" 
                  onchange="updateIndividualRecipient(${productId}, 'address', this.value)"
                  placeholder="">${product.recipient.address}</textarea>
      </div>
    `
    container.innerHTML += formHTML
  })
}

function updateIndividualRecipient(productId, field, value) {
  if (figmaOrderState.products[productId] && figmaOrderState.products[productId].recipient) {
    figmaOrderState.products[productId].recipient[field] = value
  }
  clearValidationErrors()
}

function validateFigmaOrder() {
  const errors = []

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä–∞–Ω—ã
  if (!figmaOrderState.country) {
    errors.push("–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É –≤—ã–∫—É–ø–∞")
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–≤–∞—Ä–æ–≤
  const hasValidProduct = figmaOrderState.activeProducts.some((productId) => {
    const product = figmaOrderState.products[productId]
    return product.link && product.price && product.quantity > 0
  })

  if (!hasValidProduct) {
    errors.push("–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ —Ö–æ—Ç—è –±—ã –¥–ª—è –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞")
  }

  // –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –¥–æ—Å—Ç–∞–≤–∫–∏
  if (figmaOrderState.deliveryType === "same") {
    const name = document.getElementById("figmaRecipientName")?.value
    const username = document.getElementById("figmaRecipientUsername")?.value
    const address = document.getElementById("figmaRecipientAddress")?.value

    if (!name) errors.push("–í–≤–µ–¥–∏—Ç–µ –§–ò–û –ø–æ–ª—É—á–∞—Ç–µ–ª—è")
    if (!username) errors.push("–í–≤–µ–¥–∏—Ç–µ —é–∑–µ—Ä–Ω–µ–π–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è")
    if (!address) errors.push("–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –ü–í–ó –°–î–≠–ö")
  } else {
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞
    figmaOrderState.activeProducts.forEach((productId) => {
      const product = figmaOrderState.products[productId]
      if (product.link && product.price) {
        // –¢–æ–ª—å–∫–æ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤
        if (!product.recipient || !product.recipient.name) {
          errors.push(`–í–≤–µ–¥–∏—Ç–µ –§–ò–û –ø–æ–ª—É—á–∞—Ç–µ–ª—è –¥–ª—è —Ç–æ–≤–∞—Ä–∞ ${productId}`)
        }
        if (!product.recipient || !product.recipient.username) {
          errors.push(`–í–≤–µ–¥–∏—Ç–µ —é–∑–µ—Ä–Ω–µ–π–º –ø–æ–ª—É—á–∞—Ç–µ–ª—è –¥–ª—è —Ç–æ–≤–∞—Ä–∞ ${productId}`)
        }
        if (!product.recipient || !product.recipient.address) {
          errors.push(`–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –ü–í–ó –°–î–≠–ö –¥–ª—è —Ç–æ–≤–∞—Ä–∞ ${productId}`)
        }
      }
    })
  }

  return errors
}

function showValidationErrors(errors) {
  const errorContainer = document.getElementById("validationError")
  if (errors.length > 0) {
    errorContainer.innerHTML = errors.map((error) => `‚Ä¢ ${error}`).join("<br>")
    errorContainer.classList.add("show")

    // –ü–æ–¥—Å–≤–µ—Ç–∏—Ç—å –ø–æ–ª—è —Å –æ—à–∏–±–∫–∞–º–∏
    highlightErrorFields(errors)

    // –ü—Ä–æ–∫—Ä—É—Ç–∏—Ç—å –∫ –æ—à–∏–±–∫–∞–º
    errorContainer.scrollIntoView({ behavior: "smooth", block: "center" })
  } else {
    clearValidationErrors()
  }
}

function clearValidationErrors() {
  const errorContainer = document.getElementById("validationError")
  errorContainer.classList.remove("show")

  // –£–±—Ä–∞—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫—É —Å –ø–æ–ª–µ–π
  document.querySelectorAll(".field-error").forEach((field) => {
    field.classList.remove("field-error")
  })
}

function highlightErrorFields(errors) {
  // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–ª–µ–π
  if (errors.some((e) => e.includes("–§–ò–û"))) {
    document.getElementById("figmaRecipientName")?.classList.add("field-error")
  }
  if (errors.some((e) => e.includes("—é–∑–µ—Ä–Ω–µ–π–º"))) {
    document.getElementById("figmaRecipientUsername")?.classList.add("field-error")
  }
  if (errors.some((e) => e.includes("–∞–¥—Ä–µ—Å"))) {
    document.getElementById("figmaRecipientAddress")?.classList.add("field-error")
  }
}

function updateFigmaSubmitButton() {
  const btn = document.querySelector(".figma-submit-button-image")
  if (!btn) return

  const errors = validateFigmaOrder()
  btn.disabled = errors.length > 0
  btn.style.opacity = errors.length > 0 ? "0.5" : "1"
}

// –û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–∫–∞–∑–∞
function submitFigmaOrder() {
  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—É—â–µ–≥–æ —Ç–æ–≤–∞—Ä–∞
  saveFigmaCurrentProductData()

  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –æ–±—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è –µ—Å–ª–∏ –¥–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ –æ–¥–∏–Ω –∞–¥—Ä–µ—Å
  if (figmaOrderState.deliveryType === "same") {
    figmaOrderState.commonRecipient = {
      name: document.getElementById("figmaRecipientName")?.value || "",
      username: document.getElementById("figmaRecipientUsername")?.value || "",
      address: document.getElementById("figmaRecipientAddress")?.value || "",
    }
  }

  const errors = validateFigmaOrder()
  if (errors.length > 0) {
    showValidationErrors(errors)
    return
  }

  showFigmaOrderPreview()
}

function uploadFigmaPhoto() {
  document.getElementById("figmaPhotoInput").click()
}

function handleFigmaPhotoUpload(input) {
  const files = input.files
  const product = figmaOrderState.products[figmaOrderState.currentProductId]

  if (!product) return

  for (let i = 0; i < files.length; i++) {
    const file = files[i]
    const reader = new FileReader()

    reader.onload = (e) => {
      product.photos.push(e.target.result)
      updatePhotoPreview()
    }

    reader.readAsDataURL(file)
  }

  // –û—á–∏—Å—Ç–∏—Ç—å input –¥–ª—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏
  input.value = ""
}

function deleteFigmaProduct() {
  const currentId = figmaOrderState.currentProductId

  // –ï—Å–ª–∏ —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–æ–≤–∞—Ä, —Ç–æ–ª—å–∫–æ –æ—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
  if (figmaOrderState.activeProducts.length === 1) {
    figmaOrderState.products[currentId] = {
      marketplace: "",
      link: "",
      price: "",
      color: "",
      size: "",
      quantity: 1,
      comment: "",
      photos: [],
      recipient: null,
    }
    loadFigmaProductData()
  } else {
    // –£–¥–∞–ª–∏—Ç—å —Ç–æ–≤–∞—Ä –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö
    figmaOrderState.activeProducts = figmaOrderState.activeProducts.filter((id) => id !== currentId)

    // –û—á–∏—Å—Ç–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä–∞
    figmaOrderState.products[currentId] = {
      marketplace: "",
      link: "",
      price: "",
      color: "",
      size: "",
      quantity: 1,
      comment: "",
      photos: [],
      recipient: null,
    }

    // –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –ø–µ—Ä–≤—ã–π –∞–∫—Ç–∏–≤–Ω—ã–π —Ç–æ–≤–∞—Ä
    figmaOrderState.currentProductId = figmaOrderState.activeProducts[0]
    updateFigmaProductTabs()
    loadFigmaProductData()
  }

  updateFigmaSubmitButton()
}

function updatePhotoPreview() {
  const container = document.getElementById("photoPreviewContainer")
  const product = figmaOrderState.products[figmaOrderState.currentProductId]

  if (!container || !product) return

  container.innerHTML = ""

  product.photos.forEach((photo, index) => {
    const photoItem = document.createElement("div")
    photoItem.className = "photo-preview-item"
    photoItem.innerHTML = `
      <img src="${photo}" alt="–§–æ—Ç–æ ${index + 1}" class="photo-preview-img">
      <button class="photo-delete-btn" onclick="deletePhoto(${index})" type="button">√ó</button>
    `
    container.appendChild(photoItem)
  })
}

function deletePhoto(index) {
  const product = figmaOrderState.products[figmaOrderState.currentProductId]
  if (product && product.photos) {
    product.photos.splice(index, 1)
    updatePhotoPreview()
  }
}

function showFigmaOrderPreview() {
  // –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö
  const filledProducts = figmaOrderState.activeProducts
    .map((productId) => ({ id: productId, ...figmaOrderState.products[productId] }))
    .filter((product) => product.link && product.price)

  // –°–æ–∑–¥–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–º –ø—Ä–æ—Å–º–æ—Ç—Ä–æ–º –∑–∞–∫–∞–∑–∞
  const modal = document.createElement("div")
  modal.className = "modal show"
  modal.innerHTML = `
    <div class="modal-content">
      <div class="modal-header">
        <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞</h3>
        <button class="modal-close" onclick="closeFigmaModal(this)">&times;</button>
      </div>
      <div class="modal-body">
        <div class="preview-item">
          <h4>–°—Ç—Ä–∞–Ω–∞ –≤—ã–∫—É–ø–∞</h4>
          <div class="preview-field">
            <span class="preview-field-label">–°—Ç—Ä–∞–Ω–∞:</span>
            <span class="preview-field-value">${figmaOrderState.country.toUpperCase()}</span>
          </div>
        </div>
        
        <div class="preview-item">
          <h4>–¢–∏–ø –¥–æ—Å—Ç–∞–≤–∫–∏</h4>
          <div class="preview-field">
            <span class="preview-field-label">–î–æ—Å—Ç–∞–≤–∫–∞:</span>
            <span class="preview-field-value">${figmaOrderState.deliveryType === "same" ? "–ù–∞ –æ–¥–∏–Ω –∞–¥—Ä–µ—Å" : "–ù–∞ —Ä–∞–∑–Ω—ã–µ –∞–¥—Ä–µ—Å–∞"}</span>
          </div>
        </div>
        
        ${filledProducts
          .map(
            (product) => `
          <div class="preview-item">
            <h4>–¢–æ–≤–∞—Ä ${product.id}</h4>
            ${
              product.marketplace
                ? `
              <div class="preview-field">
                <span class="preview-field-label">–ü–ª–æ—â–∞–¥–∫–∞:</span>
                <span class="preview-field-value">${product.marketplace === "category1" ? "–ö–∞—Ç–µ–≥–æ—Ä–∏—è 1 (POIZON, TaoBao, Weidan)" : "–ö–∞—Ç–µ–≥–æ—Ä–∏—è 2 (WeChat, Yupoo, GooFish)"}</span>
              </div>
            `
                : ""
            }
            <div class="preview-field">
              <span class="preview-field-label">–°—Å—ã–ª–∫–∞:</span>
              <span class="preview-field-value">${product.link}</span>
            </div>
            <div class="preview-field">
              <span class="preview-field-label">–¶–µ–Ω–∞:</span>
              <span class="preview-field-value">${product.price}</span>
            </div>
            <div class="preview-field">
              <span class="preview-field-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ:</span>
              <span class="preview-field-value">${product.quantity}</span>
            </div>
            ${
              product.color
                ? `
              <div class="preview-field">
                <span class="preview-field-label">–¶–≤–µ—Ç:</span>
                <span class="preview-field-value">${product.color}</span>
              </div>
            `
                : ""
            }
            ${
              product.size
                ? `
              <div class="preview-field">
                <span class="preview-field-label">–†–∞–∑–º–µ—Ä:</span>
                <span class="preview-field-value">${product.size}</span>
              </div>
            `
                : ""
            }
            ${
              product.comment
                ? `
              <div class="preview-field">
                <span class="preview-field-label">–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π:</span>
                <span class="preview-field-value">${product.comment}</span>
              </div>
            `
                : ""
            }
            ${
              product.photos && product.photos.length > 0
                ? `
              <div class="preview-field">
                <span class="preview-field-label">–§–æ—Ç–æ (${product.photos.length}):</span>
                <div class="modal-photos">
                  ${product.photos.map((photo) => `<img src="${photo}" alt="–§–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞" class="modal-photo">`).join("")}
                </div>
              </div>
            `
                : ""
            }
            ${
              figmaOrderState.deliveryType === "different" && product.recipient
                ? `
              <div class="preview-field">
                <span class="preview-field-label">–ü–æ–ª—É—á–∞—Ç–µ–ª—å:</span>
                <span class="preview-field-value">${product.recipient.name} (@${product.recipient.username})</span>
              </div>
              <div class="preview-field">
                <span class="preview-field-label">–ê–¥—Ä–µ—Å:</span>
                <span class="preview-field-value">${product.recipient.address}</span>
              </div>
            `
                : ""
            }
          </div>
        `,
          )
          .join("")}

        ${
          figmaOrderState.deliveryType === "same"
            ? `
        <div class="preview-item">
          <h4>–ü–æ–ª—É—á–∞—Ç–µ–ª—å (–æ–±—â–∏–π)</h4>
          <div class="preview-field">
            <span class="preview-field-label">–§–ò–û:</span>
            <span class="preview-field-value">${figmaOrderState.commonRecipient.name}</span>
          </div>
          <div class="preview-field">
            <span class="preview-field-label">–Æ–∑–µ—Ä–Ω–µ–π–º:</span>
            <span class="preview-field-value">@${figmaOrderState.commonRecipient.username}</span>
          </div>
          <div class="preview-field">
            <span class="preview-field-label">–ü–í–ó –°–î–≠–ö:</span>
            <span class="preview-field-value">${figmaOrderState.commonRecipient.address}</span>
          </div>
        </div>
        `
            : ""
        }
      </div>
      <div class="modal-footer">
        <button class="modal-btn cancel-btn" onclick="closeFigmaModal(this)">–û—Ç–º–µ–Ω–∞</button>
        <button class="modal-btn submit-btn" onclick="confirmFigmaOrder()">–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –∑–∞–∫–∞–∑</button>
      </div>
    </div>
  `

  document.body.appendChild(modal)
}

function closeFigmaModal(element) {
  const modal = element.closest(".modal")
  if (modal) {
    modal.remove()
  }
}

function confirmFigmaOrder() {
  // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–∫–∞–∑–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
  alert("–ó–∞–∫–∞–∑ —É—Å–ø–µ—à–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è.")

  // –ó–∞–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
  const modal = document.querySelector(".modal")
  if (modal) {
    modal.remove()
  }

  // –ü–û–õ–ù–û–°–¢–¨–Æ –æ—á–∏—Å—Ç–∏—Ç—å —Ñ–æ—Ä–º—É –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  resetFigmaOrderState()

  // –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –ø–æ–ª—è —Ñ–æ—Ä–º—ã
  const form = document.getElementById("figmaOrderForm")
  if (form) {
    form.reset()
  }

  // –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä–∞ —Ñ–æ—Ç–æ
  const photoContainer = document.getElementById("photoPreviewContainer")
  if (photoContainer) {
    photoContainer.innerHTML = ""
  }

  // –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—É—á–∞—Ç–µ–ª—è
  const recipientContainer = document.getElementById("recipientDataContainer")
  if (recipientContainer) {
    recipientContainer.innerHTML = ""
  }

  // –í–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—É—é –∏ –æ—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
  pageHistory = ["home"]
  navigateTo("home")
}

// –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏
function handleImageError(img, fallbackText) {
  img.style.display = "none"
  const fallback = img.nextElementSibling
  if (fallback && fallback.classList.contains("image-fallback")) {
    fallback.style.display = "flex"
    fallback.textContent = fallbackText
  }
}

function handleImageLoad(img) {
  img.classList.remove("loading")
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è Telegram –∫–∞–Ω–∞–ª–∞
function openTelegramChannel(event) {
  // –î–æ–±–∞–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏—é –∫–ª–∏–∫–∞
  const buttonImg = event.target
  if (buttonImg.classList.contains("main-button-image")) {
    buttonImg.classList.add("clicked")
    setTimeout(() => {
      buttonImg.classList.remove("clicked")
    }, 600)
  }

  // –û—Ç–∫—Ä—ã—Ç—å Telegram –∫–∞–Ω–∞–ª
  window.open("https://t.me/volt_logistics", "_blank")
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
window.addEventListener("load", () => {
  console.log("Volt Logistics Order System loaded")

  // –ü–æ–∫–∞–∑–∞—Ç—å –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  if (currentPage === "home") {
    setTimeout(() => {
      const mainNav = document.getElementById("mainNav")
      if (mainNav) {
        mainNav.classList.add("show")
      }
    }, 500)
  }

  // –ü–æ–∫–∞–∑–∞—Ç—å –∫–Ω–æ–ø–∫—É –Ω–∞–∑–∞–¥ –µ—Å–ª–∏ –Ω–µ –Ω–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  if (currentPage !== "home") {
    setTimeout(() => {
      const backButton = document.getElementById("backButton")
      if (backButton) {
        backButton.classList.add("show")
      }
    }, 100)
  }
})

// –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∞–≤—Ç–æ—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö —Ç–æ–≤–∞—Ä–∞
document.addEventListener("DOMContentLoaded", () => {
  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–∞–Ω–µ–ª–∏ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
  const managerIds = [919034275, 372145026, 6432717873];
  
  function isUserManager() {
    if (window.Telegram && window.Telegram.WebApp && window.Telegram.WebApp.initDataUnsafe) {
      const user = window.Telegram.WebApp.initDataUnsafe.user;
      if (user && user.id) {
        console.log('Current user ID:', user.id);
        return managerIds.includes(user.id);
      }
    }
    console.log('Running outside Telegram WebApp - manager panel hidden');
    return false;
  }
  
  const managerPanel = document.querySelector('.manager-panel');
  if (managerPanel) {
    if (isUserManager()) {
      managerPanel.style.display = 'block';
      console.log('Manager panel shown - user is a manager');
    } else {
      managerPanel.style.display = 'none';
      console.log('Manager panel hidden - user is not a manager');
    }
  }

  // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è –ø–æ–ª–µ–π —Ç–æ–≤–∞—Ä–∞
  const productFields = [
    "figmaMarketplace",
    "figmaLink",
    "figmaPrice",
    "figmaColor",
    "figmaSize",
    "figmaQuantity",
    "figmaComment",
  ]

  productFields.forEach((fieldId) => {
    const field = document.getElementById(fieldId)
    if (field) {
      field.addEventListener("change", saveFigmaCurrentProductData)
      field.addEventListener("input", saveFigmaCurrentProductData)
    }
  })
})

function updateScrollIndicator() {
  const tabsContainer = document.querySelector(".figma-product-tabs")
  if (tabsContainer) {
    const isScrollable = tabsContainer.scrollWidth > tabsContainer.clientWidth
    if (isScrollable) {
      tabsContainer.classList.add("scrollable")
    } else {
      tabsContainer.classList.remove("scrollable")
    }
  }
}

    </script>
</body>
</html>
