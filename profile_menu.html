<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ú–µ–Ω—é –ø—Ä–æ—Ñ–∏–ª—è - Volt Logistics</title>
    <link rel="stylesheet" href="style.css">
    <script src="js/common.js"></script>
    <script src="js/profile_menu.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        @font-face {
            font-family: 'TT Runs';
            src: url('TT_Runs_Trial_Regular_zenSkO.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        body {
            font-family: 'TT Runs', Arial, sans-serif;
        }

        .profile-page-container {
            padding: 20px;
            min-height: calc(100vh - 32px);
        }

        .profile-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            max-width: 400px;
            margin: 0 auto;
        }

        .profile-button {
            background: none;
            border: none;
            padding: 0;
            cursor: pointer;
            width: 100%;
            height: auto;
            transition: transform 0.15s ease;
        }

        .profile-button:active {
            transform: scale(0.98);
        }

        .profile-button img {
            width: 100%;
            height: auto;
            border-radius: 20px;
        }

        /* –°—Ç–∏–ª–∏ –¥–ª—è –∞–≤–∞—Ç–∞—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è */
        .avatar-container {
            position: relative;
        }

        .avatar-circle {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background-color: #00BCD4;
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            border: 2px solid white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
            pointer-events: none;
            /* –ß—Ç–æ–±—ã –∫–ª–∏–∫–∏ –ø—Ä–æ—Ö–æ–¥–∏–ª–∏ —Å–∫–≤–æ–∑—å –∞–≤–∞—Ç–∞—Ä–∫—É –Ω–∞ –∫–Ω–æ–ø–∫—É */
        }
    </style>
    <script src="js/common.js"></script>
    <script src="js/profile_menu.js"></script>

</head>

<body>
    <div class="profile-page-container">
        <!-- –°–µ—Ç–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫ –ø—Ä–æ—Ñ–∏–ª—è -->
        <div class="profile-grid">
            <!-- –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å -->
            <div class="avatar-container">
                <button class="profile-button" onclick="navigateTo('my-profile')">
                    <img src="img/my_profile_page.svg" alt="–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å" onerror="handleImageError(this, 'üë§ –ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å')" onload="handleImageLoad(this)">
                </button>
                <div class="avatar-circle" id="userAvatar">üë§</div>
            </div>

            <!-- –ú–æ–∏ –∑–∞–∫–∞–∑—ã -->
            <button class="profile-button" onclick="navigateTo('my-orders')">
                <img src="img/my_orders.svg" alt="–ú–æ–∏ –∑–∞–∫–∞–∑—ã" onerror="handleImageError(this, 'üì¶ –ú–æ–∏ –∑–∞–∫–∞–∑—ã')" onload="handleImageLoad(this)">
            </button>

            <!-- –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ -->
            <button class="profile-button" onclick="navigateTo('referral')">
                <img src="img/referral.svg" alt="–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞" onerror="handleImageError(this, 'üéÅ –†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞')" onload="handleImageLoad(this)">
            </button>

            <!-- –ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ (—Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤) -->
            <button id="managerPanelButton" class="profile-button manager-panel" onclick="window.location.href='manager_panel.html'" style="display: none;">
                <img src="img/manager_panel.svg" alt="–ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞" onerror="handleImageError(this, 'üë®‚Äçüíº –ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞')" onload="handleImageLoad(this)">
            </button>
        </div>
    </div>

    <!-- –°—Ç–∏–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" -->
    <button class="stylish-back-button show" onclick="goBack()" aria-label="–ù–∞–∑–∞–¥">
        <alt="–ù–∞–∑–∞–¥" onerror="this.style.display='none'">
    </button>

    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script>
        // –ö–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–≤–∞—Ç–∞—Ä–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ Telegram
        document.addEventListener('DOMContentLoaded', function () {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ—Å—Ç—É–ø–µ–Ω –ª–∏ Telegram WebApp
            if (window.Telegram && window.Telegram.WebApp) {
                const user = window.Telegram.WebApp.initDataUnsafe.user;
                if (user) {
                    // –ï—Å–ª–∏ –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏–Ω–∏—Ü–∏–∞–ª—ã
                    const userAvatar = document.getElementById('userAvatar');
                    if (user.first_name) {
                        userAvatar.textContent = user.first_name.charAt(0);
                    }
                }
            }

            // –ü–æ–∫–∞–∑–∞—Ç—å –ø–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Ç–æ–ª—å–∫–æ –¥–ª—è –º–µ–Ω–µ–¥–∂–µ—Ä–æ–≤
            function checkManagerAccess() {
                // –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ script_clean.js
                const user = getTelegramUser();
                const isManagerUser = isManager();
                
                console.log('üë§ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –ø—Ä–æ—Ñ–∏–ª–µ:', user);
                console.log('üë®‚Äçüíº –ü—Ä–∞–≤–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞:', isManagerUser);
                
                if (isManagerUser) {
                    const managerButton = document.getElementById('managerPanelButton');
                    if (managerButton) {
                        managerButton.style.display = 'block';
                        console.log('‚úÖ –ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–æ–∫–∞–∑–∞–Ω–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ');
                    }
                } else {
                    console.log('‚ùå –ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Å–∫—Ä—ã—Ç–∞ - –Ω–µ—Ç –ø—Ä–∞–≤');
                }
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø—Ä–∞–≤–∞ –º–µ–Ω–µ–¥–∂–µ—Ä–∞ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ script_clean.js
            setTimeout(checkManagerAccess, 500);
            
            const managerPanel = document.querySelector('.manager-panel');
            if (managerPanel) {
                if (isManager()) {
                    managerPanel.style.display = 'block';
                    console.log('Manager panel shown - user is a manager');
                } else {
                    managerPanel.style.display = 'none';
                    console.log('Manager panel hidden - user is not a manager');
                }
            }
        });
    </script>

    <!-- –°—Ç–∏–ª—å–Ω–∞—è –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π -->
    <button class="stylish-back-button show" onclick="goBack()" aria-label="–ù–∞–∑–∞–¥">
    </button>
</body>

</html>